FROM azi03/java-server:1.8

ARG PORJ_NAME
ARG PROJ_VERSION

ENV ENV=DEV \
 JAVA_OPTIONS="" \
 PORJ_NAME=$PORJ_NAME \
 PROJ_VERSION=$PROJ_VERSION \
 PINPOINT_OPTIONS="" \
 PINPOINT_AGENT_ID=$PORJ_NAME-$PROJ_VERSION \
 PINPOINT_APPLICATION_NAME=$PORJ_NAME

RUN mkdir -p /data/app
WORKDIR /data/app
COPY $PORJ_NAME-$PROJ_VERSION.jar /data/app/$PORJ_NAME.jar

CMD java $JAVA_OPTIONS $PINPOINT_OPTIONS -Djava.security.egd=file:/dev/./urandom -jar /data/app/$PORJ_NAME.jar
